2^64
setwd("~/Dropbox/Tutoring/Classes & Courses/MarAfrica, modelling the distribution of biodiversity and climate change/Git/courseMarAfrica/Sessions [P]/projectExample")
# Load main functions
source("sourceFunctions.R")
# load clean occurrence data with two columns only for Lon and Lat (follow Recipe 1)
records <- read.csv("Data/mycleanRecords.csv", sep = ";")
# Read polygon defining global landmasses
world <- shapefile("Data/globalLandmass/world.shp")
# Define my extent
myExtent <- extent(-20,47.5,10,60)
# Crop polygon to my region
myRegion <- crop(world,myExtent)
plot(myRegion,col="gray",border="gray")
# plot my records
points(records, pch=20, col="Black")
# Load layers from directory
environmentPresent <- stackDirectory('Data/rastersPresent/')
plot(environmentPresent)
# crop and plot layers
environmentPresent <- crop(environmentPresent,myExtent)
plot(environmentPresent)
# produce model with raster layers and distribution records
model <- produceModel(myRasterLayers=environmentPresent,myRecords=records)
getAUC(model, test = TRUE)
# Plot the relative importance of variables
importanceVariables <- varImp(model, permut = 5)
importanceVariables
plotVarImp(importanceVariables)
# Produce response curves
names(environmentPresent)
plotResponse(model, var = "OceanTemperature.Benthic.Mean.Pred.LtMax", type = "logistic", only_presence = FALSE, marginal = FALSE, rug = FALSE, color="Black")
plotResponse(model, var = "DissolvedMolecularOxygen.Benthic.Mean.Pred.Mean", type = "logistic", only_presence = FALSE, marginal = FALSE, rug = FALSE, color="Black")
# predict with BRT to raster stack
mapPresent <- predict(model, environmentPresent, type=c("logistic"))
plot(mapPresent)
plot(mapPresent)
points(records, pch=20, col="Black")
# Load layers
environmentRCP26 <- stackDirectory('Data/rastersFutureRCP26/')
plot(environmentRCP26)
environmentRCP26 <- mask(environmentRCP26,maskCoastal)
plot(environmentRCP85)
environmentRCP26 <- mask(environmentRCP26,maskCoastal)
# crop and plot layers
environmentRCP26 <- crop(environmentRCP26,myExtent)
plot(environmentRCP26)
mapRCP26 <- predict(model, environmentRCP26, type=c("logistic"))
plot(mapRCP26)
plot(mapRCP26 - mapPresent)
# Load layers
environmentRCP85 <- stackDirectory('Data/rastersFutureRCP85/')
# crop and plot layers
environmentRCP85 <- crop(environmentRCP85,myExtent)
plot(environmentRCP85)
mapRCP85 <- predict(model, environmentRCP85, type=c("logistic"))
par(mfrow=c(1,3))
plot(mapPresent)
plot(mapRCP26 - mapPresent)
plot(mapRCP85 - mapPresent)
dev.off()
# Load main functions
source("sourceFunctions.R")
# load clean occurrence data with two columns only for Lon and Lat (follow Recipe 1)
records <- read.csv("Data/mycleanRecords.csv", sep = ";")
# Read polygon defining global landmasses
world <- shapefile("Data/globalLandmass/world.shp")
# Define my extent
myExtent <- extent(-20,47.5,10,60)
# Crop polygon to my region
myRegion <- crop(world,myExtent)
plot(myRegion,col="gray",border="gray")
# plot my records
points(records, pch=20, col="Black")
# Load layers
environmentPresent <- stackDirectory('Data/rastersPresent/')
plot(environmentPresent)
# crop and plot layers
environmentPresent <- crop(environmentPresent,myExtent)
plot(environmentPresent)
myRasterLayers <- environmentPresent
# Load main functions
source("sourceFunctions.R")
# load clean occurrence data with two columns only for Lon and Lat (follow Recipe 1)
records <- read.csv("Data/mycleanRecords.csv", sep = ";")
# Read polygon defining global landmasses
world <- shapefile("Data/globalLandmass/world.shp")
# Define my extent
myExtent <- extent(-20,47.5,10,60)
# Crop polygon to my region
myRegion <- crop(world,myExtent)
plot(myRegion,col="gray",border="gray")
# plot my records
points(records, pch=20, col="Black")
# Load layers
environmentPresent <- stackDirectory('Data/rastersPresent/')
plot(environmentPresent)
# crop and plot layers
environmentPresent <- crop(environmentPresent,myExtent)
plot(environmentPresent)
# produce model with raster layers and distribution records
model <- produceModel(myRasterLayers=environmentPresent,myRecords=records)
getAUC(model, test = TRUE)
# Plot the relative importance of variables
importanceVariables <- varImp(model, permut = 5)
importanceVariables
plotVarImp(importanceVariables)
# Produce response curves
names(environmentPresent)
plotResponse(model, var = "OceanTemperature.Benthic.Mean.Pred.LtMax", type = "logistic", only_presence = FALSE, marginal = FALSE, rug = FALSE, color="Black")
# predict with BRT to raster stack
mapNative <- predict(model, environmentPresent, type=c("logistic"))
plot(mapPresent)
plot(mapNative)
plot(mapNative)
points(records, pch=20, col="Black")
myExtent <- extent(100,-170,-52,-4)
myExtent <- extent(100,180,-52,-4)
# Crop polygon to my region
myRegion <- crop(world,myExtent)
plot(myRegion,col="gray",border="gray")
myExtent <- extent(100,180,-52,-8)
# Crop polygon to my region
myRegion <- crop(world,myExtent)
plot(myRegion,col="gray",border="gray")
myExtent <- extent(100,180,-52,-10)
# Crop polygon to my region
myRegion <- crop(world,myExtent)
plot(myRegion,col="gray",border="gray")
# Load layers
environmentPresent <- stackDirectory('Data/rastersPresent/')
plot(environmentPresent)
# crop and plot layers
environmentPresent <- crop(environmentPresent,myExtent)
plot(environmentPresent)
# predict with BRT to raster stack
mapInvasive <- predict(model, environmentPresent, type=c("logistic"))
plot(mapInvasive)
par(mfrow=c(1,2))
plot(mapNative)
plot(mapInvasive)
dev.off()
# Load main functions
source("sourceFunctions.R")
# load clean occurrence data with two columns only for Lon and Lat (follow Recipe 1)
records <- read.csv("Data/mycleanRecords.csv", sep = ";")
# Read polygon defining global landmasses
world <- shapefile("Data/globalLandmass/world.shp")
# Define my extent
myExtent <- extent(-20,47.5,10,60)
# Crop polygon to my region
myRegion <- crop(world,myExtent)
plot(myRegion,col="gray",border="gray")
# plot my records
points(records, pch=20, col="Black")
# Load layers
environmentPresent <- stackDirectory('Data/rastersPresent/')
plot(environmentPresent)
# crop and plot layers
environmentPresent <- crop(environmentPresent,myExtent)
plot(environmentPresent)
# produce model with raster layers and distribution records
model <- produceModel(myRasterLayers=environmentPresent,myRecords=records)
getAUC(model, test = TRUE)
# Plot the relative importance of variables
importanceVariables <- varImp(model, permut = 5)
importanceVariables
plotVarImp(importanceVariables)
# Produce response curves
names(environmentPresent)
# predict with BRT to raster stack
mapNative <- predict(model, environmentPresent, type=c("logistic"))
plot(mapNative)
plot(mapNative)
points(records, pch=20, col="Black")
myExtent <- extent(100,180,-52,-10)
# Crop polygon to my region
myRegion <- crop(world,myExtent)
plot(myRegion,col="gray",border="gray")
# Load layers
environmentPresent <- stackDirectory('Data/rastersPresent/')
plot(environmentPresent)
# crop and plot layers
environmentPresent <- crop(environmentPresent,myExtent)
plot(environmentPresent)
# predict with BRT to raster stack
mapInvasive <- predict(model, environmentPresent, type=c("logistic"))
plot(mapInvasive)
par(mfrow=c(1,2))
plot(mapNative)
plot(mapInvasive)
dev.off()
predict
?predict
class(model)
# Load main functions
source("sourceFunctions.R")
# load clean occurrence data with two columns only for Lon and Lat (follow Recipe 1)
records <- read.csv("Data/mycleanRecords.csv", sep = ";")
View(records)
# Read polygon defining global landmasses
world <- shapefile("Data/globalLandmass/world.shp")
plot(world)
# load clean occurrence data with two columns only for Lon and Lat (follow Recipe 1)
records <- read.csv("Data/mycleanRecords.csv", sep = ";")
View(records)
# Define my extent
myExtent <- extent(-20,47.5,10,60)
# Crop polygon to my region
myRegion <- crop(world,myExtent)
plot(myRegion,col="gray",border="gray")
# plot my records
points(records, pch=20, col="Black")
# Load layers from directory
environmentPresent <- stackDirectory('Data/rastersPresent/')
temperature <- raster('Data/rastersPresent/OceanTemperature Benthic Mean Pred LtMax.tif')
temperature
plot(temperature)
oxygen <- raster('Data/rastersPresent/DissolvedMolecularOxygen Benthic Mean Pred Mean')
oxygen <- raster('Data/rastersPresent/DissolvedMolecularOxygen Benthic Mean Pred Mean.tif')
plot(oxygen)
environmentPresent <- stack(temperature,oxygen)
plot(environmentPresent)
a <- c(1,2,3)
a
mean(a)
environmentPresent <- stackDirectory('Data/rastersPresent/')
environmentPresent
plot(environmentPresent)
# mask to coastLine [if needed!] and plot
maskCoastal <- raster("Data/CoastLine.tif")
plot(maskCoastal, col="black")
environmentPresent <- mask(environmentPresent,maskCoastal)
plot(environmentPresent)
plot(myRegion,col="gray",border="gray")
# crop and plot layers
environmentPresent <- crop(environmentPresent,myExtent)
plot(environmentPresent)
# Load layers from directory
environmentPresent <- stackDirectory('Data/rastersPresent/')
plot(environmentPresent)
# crop and plot layers
environmentPresent <- crop(environmentPresent,myExtent)
plot(environmentPresent)
plot(environmentPresent)
# produce model with raster layers and distribution records
model <- produceModel(myRasterLayers=environmentPresent,myRecords=records)
getAUC(model, test = TRUE)
# Plot the relative importance of variables
importanceVariables <- varImp(model, permut = 5)
importanceVariables
importanceVariables
plotVarImp(importanceVariables)
# Produce response curves
names(environmentPresent)
plot(environmentPresent)
plotResponse(model, var = "OceanTemperature.Benthic.Mean.Pred.LtMin", type = "logistic", only_presence = FALSE, marginal = FALSE, rug = FALSE, color="Black")
plotResponse(model, var = "TotalPrimaryProductionPhyto.Benthic.Mean.Pred.Mean", type = "logistic", only_presence = FALSE, marginal = FALSE, rug = FALSE, color="Black")
# predict with BRT to raster stack
mapPresent <- predict(model, environmentPresent, type=c("logistic"))
plot(mapPresent)
mapPresent
# Load layers
environmentRCP26 <- stackDirectory('Data/rastersFutureRCP26/')
plot(environmentRCP26)
# crop and plot layers
environmentRCP26 <- crop(environmentRCP26,myExtent)
plot(environmentRCP26)
mapRCP26 <- predict(model, environmentRCP26, type=c("logistic"))
plot(mapRCP26)
plot(mapRCP26 - mapPresent)
# Load layers
environmentRCP85 <- stackDirectory('Data/rastersFutureRCP85/')
plot(environmentRCP85)
# crop and plot layers
environmentRCP85 <- crop(environmentRCP85,myExtent)
plot(environmentRCP85)
mapRCP85 <- predict(model, environmentRCP85, type=c("logistic"))
plot(mapRCP85)
plot(mapRCP85 - mapPresent)
par(mfrow=c(1,3))
plot(mapPresent)
plot(mapRCP26 - mapPresent)
plot(mapRCP85 - mapPresent)
dev.off()
par(mfrow=c(1,3))
plot(mapPresent)
plot(mapRCP26 - mapPresent)
plot(mapRCP85 - mapPresent)
mapRCP26 - mapPresent
mapRCP85 - mapPresent
# Load main functions
source("sourceFunctions.R")
# load clean occurrence data with two columns only for Lon and Lat (follow Recipe 1)
records <- read.csv("Data/mycleanRecords.csv", sep = ";")
View(records)
# Read polygon defining global landmasses
world <- shapefile("Data/globalLandmass/world.shp")
# Define my extent
myExtent <- extent(-20,47.5,10,60)
# Load layers from directory
environmentPresent <- stackDirectory('Data/rastersPresent/')
plot(environmentPresent)
# mask to coastLine [if needed!] and plot
maskCoastal <- raster("Data/CoastLine.tif")
plot(maskCoastal, col="black")
environmentPresent <- mask(environmentPresent,maskCoastal)
plot(environmentPresent)
# crop and plot layers
environmentPresent <- crop(environmentPresent,myExtent)
plot(environmentPresent)
# produce model with raster layers and distribution records
model <- produceModel(myRasterLayers=environmentPresent,myRecords=records)
produceModel
